/*! Forum 2015-05-21 */
var m=require("m"),Discussions={list:function(){return m.request({method:"GET",url:"/api/v1/discussions"})},detail:function(){var a="/api/v1/discussions/:discussionID";return m.request({method:"GET",url:a,data:{discussionID:m.route.param("discussionID")}})},save:function(a){return m.request({method:"POST",url:"/api/v1/discussions",data:a}).then}},Home={controller:function(){var a=Discussions.list();return{discussions:a}},view:function(a){return m("ul","Read a discussion",[m("br"),a.discussions().map(function(a){var b="[href='/discussion/"+a.id+"']";return m("li",m("a"+b,{config:m.route},a.title))}),m("br"),m("a",{href:"/new/discussion",config:m.route},"Start a discussion")])}},DiscussionDetail={controller:function(){return{id:m.route.param("discussionID")}},view:function(a){return m("div",a.id)}},NewDiscussion={controller:function(){function a(){var a={},b=document.querySelectorAll("input[id^='discussion-'");Array.prototype.slice.call(b).map(function(b){a[b.id.slice(11)]=b.value}),Discussions.save(a);var c=document.querySelector("#confirm");c.style.display="inline"}return{submit:a}},view:function(a){return m("div",[m("input",{id:"discussion-title",placeholder:"title"}),m("br"),m("input",{id:"discussion-username",placeholder:"username"}),m("br"),m("input",{id:"discussion-description",placeholder:"description"}),m("br"),m("button",{onclick:a.submit},"Create Discussion"),m("br"),m("a",{href:"/",config:m.route},"Return to the Homepage"),m("br"),m("p",{style:"display: none;",id:"confirm"},"Your discussion has been submitted!")])}};m.route(document.getElementById("container"),"/",{"/":Home,"/discussion/:discussionID":DiscussionDetail,"/new/discussion":NewDiscussion});